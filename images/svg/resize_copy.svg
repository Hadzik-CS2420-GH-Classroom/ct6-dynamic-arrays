<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 740" font-family="Consolas, 'Courier New', monospace" font-size="14">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#569cd6"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4ec9b0"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc3545"/>
    </marker>
    <marker id="arrow-amber" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dcdcaa"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="860" height="740" fill="#1e1e1e" rx="8"/>

  <!-- Title -->
  <text x="430" y="35" text-anchor="middle" fill="#569cd6" font-size="18" font-weight="bold">Dynamic Array — Resize + Copy (How std::vector Works)</text>

  <!-- ============================================================ -->
  <!-- STEP 1: Array is full                                         -->
  <!-- ============================================================ -->
  <text x="30" y="72" fill="#d7ba7d" font-size="15" font-weight="bold">Step 1: Array is full — count == capacity</text>
  <text x="30" y="92" fill="#608b4e" font-size="12">int capacity = 4;  int count = 4;  // FULL!</text>

  <!-- arr pointer on stack -->
  <rect x="30" y="108" width="80" height="40" rx="6" fill="#2d2d2d" stroke="#569cd6" stroke-width="2"/>
  <text x="70" y="124" text-anchor="middle" fill="#569cd6" font-size="10" font-weight="bold">int*</text>
  <text x="70" y="140" text-anchor="middle" fill="#9cdcfe" font-size="12">arr</text>

  <!-- Arrow from arr to heap array -->
  <line x1="110" y1="128" x2="165" y2="128" stroke="#569cd6" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Heap array: capacity=4, all filled -->
  <rect x="175" y="108" width="400" height="45" rx="4" fill="#2d2d2d" stroke="#d7ba7d" stroke-width="2"/>
  <text x="375" y="103" text-anchor="middle" fill="#d7ba7d" font-size="10">capacity = 4</text>

  <!-- Cell 0: 10 -->
  <rect x="185" y="115" width="90" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="230" y="135" text-anchor="middle" fill="#b5cea8" font-size="14" font-weight="bold">10</text>

  <!-- Cell 1: 20 -->
  <rect x="280" y="115" width="90" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="325" y="135" text-anchor="middle" fill="#b5cea8" font-size="14" font-weight="bold">20</text>

  <!-- Cell 2: 30 -->
  <rect x="375" y="115" width="90" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="420" y="135" text-anchor="middle" fill="#b5cea8" font-size="14" font-weight="bold">30</text>

  <!-- Cell 3: 40 -->
  <rect x="470" y="115" width="90" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="515" y="135" text-anchor="middle" fill="#b5cea8" font-size="14" font-weight="bold">40</text>

  <!-- count bracket -->
  <line x1="185" y1="150" x2="560" y2="150" stroke="#dcdcaa" stroke-width="1.5"/>
  <text x="372" y="165" text-anchor="middle" fill="#dcdcaa" font-size="10">count = 4 (all slots used)</text>

  <!-- FULL badge -->
  <rect x="600" y="112" width="115" height="36" rx="15" fill="#dc354522" stroke="#dc3545" stroke-width="1.5"/>
  <text x="657" y="135" text-anchor="middle" fill="#dc3545" font-size="12" font-weight="bold">FULL! ✕</text>

  <!-- Warning text -->
  <text x="730" y="128" fill="#9da5b4" font-size="10">arr[4] = 50</text>
  <text x="730" y="143" fill="#dc3545" font-size="10">← undefined</text>
  <text x="730" y="156" fill="#dc3545" font-size="10">   behavior!</text>

  <!-- ============================================================ -->
  <!-- STEP 2: Allocate new, copy, delete old                       -->
  <!-- ============================================================ -->
  <line x1="30" y1="185" x2="830" y2="185" stroke="#555" stroke-width="1" stroke-dasharray="6,3"/>

  <text x="30" y="215" fill="#4ec9b0" font-size="15" font-weight="bold">Step 2: Allocate new array, copy elements, delete old</text>
  <text x="30" y="235" fill="#608b4e" font-size="12">int newCapacity = capacity * 2;   // 8</text>
  <text x="30" y="252" fill="#608b4e" font-size="12">int* newArr = new int[newCapacity];</text>

  <!-- OLD arr pointer -->
  <rect x="30" y="270" width="80" height="40" rx="6" fill="#2d2d2d" stroke="#dc3545" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="70" y="286" text-anchor="middle" fill="#dc3545" font-size="10" font-weight="bold">int*</text>
  <text x="70" y="302" text-anchor="middle" fill="#9cdcfe" font-size="12">arr</text>

  <!-- Arrow from old arr to old heap -->
  <line x1="110" y1="290" x2="165" y2="290" stroke="#dc3545" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrow-red)"/>

  <!-- Old heap array (being deleted) -->
  <rect x="175" y="272" width="400" height="42" rx="4" fill="#3d2020" stroke="#dc354580" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="375" y="266" text-anchor="middle" fill="#dc3545" font-size="10">OLD — will be deleted</text>

  <rect x="185" y="279" width="90" height="28" rx="3" fill="#1e1e1e55" stroke="#dc354533" stroke-width="1"/>
  <text x="230" y="298" text-anchor="middle" fill="#b5cea855" font-size="13">10</text>

  <rect x="280" y="279" width="90" height="28" rx="3" fill="#1e1e1e55" stroke="#dc354533" stroke-width="1"/>
  <text x="325" y="298" text-anchor="middle" fill="#b5cea855" font-size="13">20</text>

  <rect x="375" y="279" width="90" height="28" rx="3" fill="#1e1e1e55" stroke="#dc354533" stroke-width="1"/>
  <text x="420" y="298" text-anchor="middle" fill="#b5cea855" font-size="13">30</text>

  <rect x="470" y="279" width="90" height="28" rx="3" fill="#1e1e1e55" stroke="#dc354533" stroke-width="1"/>
  <text x="515" y="298" text-anchor="middle" fill="#b5cea855" font-size="13">40</text>

  <!-- Copy arrows from old to new -->
  <line x1="230" y1="314" x2="230" y2="372" stroke="#dcdcaa" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrow-amber)"/>
  <line x1="325" y1="314" x2="325" y2="372" stroke="#dcdcaa" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrow-amber)"/>
  <line x1="420" y1="314" x2="420" y2="372" stroke="#dcdcaa" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrow-amber)"/>
  <line x1="515" y1="314" x2="515" y2="372" stroke="#dcdcaa" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrow-amber)"/>

  <!-- Copy label -->
  <text x="600" y="350" fill="#dcdcaa" font-size="11" font-weight="bold">copy</text>
  <text x="600" y="366" fill="#9da5b4" font-size="10">newArr[i] = arr[i]</text>

  <!-- newArr pointer -->
  <rect x="30" y="380" width="80" height="40" rx="6" fill="#2d2d2d" stroke="#4ec9b0" stroke-width="2"/>
  <text x="70" y="396" text-anchor="middle" fill="#4ec9b0" font-size="10" font-weight="bold">int*</text>
  <text x="70" y="412" text-anchor="middle" fill="#9cdcfe" font-size="12">newArr</text>

  <!-- Arrow from newArr to new heap -->
  <line x1="110" y1="400" x2="165" y2="400" stroke="#4ec9b0" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- New heap array: capacity=8, 4 filled + 4 empty -->
  <rect x="175" y="378" width="650" height="45" rx="4" fill="#2d2d2d" stroke="#4ec9b0" stroke-width="2"/>
  <text x="500" y="373" text-anchor="middle" fill="#4ec9b0" font-size="10">NEW — newCapacity = 8</text>

  <!-- Copied cells -->
  <rect x="185" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#4ec9b055" stroke-width="1"/>
  <text x="221" y="405" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">10</text>

  <rect x="262" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#4ec9b055" stroke-width="1"/>
  <text x="298" y="405" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">20</text>

  <rect x="339" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#4ec9b055" stroke-width="1"/>
  <text x="375" y="405" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">30</text>

  <rect x="416" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#4ec9b055" stroke-width="1"/>
  <text x="452" y="405" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">40</text>

  <!-- Empty cells -->
  <rect x="493" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#55555555" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="529" y="405" text-anchor="middle" fill="#555" font-size="11">—</text>

  <rect x="570" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#55555555" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="606" y="405" text-anchor="middle" fill="#555" font-size="11">—</text>

  <rect x="647" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#55555555" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="683" y="405" text-anchor="middle" fill="#555" font-size="11">—</text>

  <rect x="724" y="386" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#55555555" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="760" y="405" text-anchor="middle" fill="#555" font-size="11">—</text>

  <!-- Delete old + update pointer code -->
  <rect x="30" y="440" width="540" height="55" rx="4" fill="#2d2d2d" stroke="#555" stroke-width="1"/>
  <text x="45" y="460" fill="#dc3545" font-size="12">delete[] arr;             <tspan fill="#6a9955">// Step 4: free old memory</tspan></text>
  <text x="45" y="480" fill="#4ec9b0" font-size="12">arr = newArr;             <tspan fill="#6a9955">// Step 5: point to new array</tspan></text>

  <!-- capacity update -->
  <rect x="585" y="440" width="245" height="55" rx="4" fill="#2d2d2d" stroke="#555" stroke-width="1"/>
  <text x="600" y="460" fill="#4ec9b0" font-size="12">capacity = newCapacity;</text>
  <text x="600" y="480" fill="#9da5b4" font-size="11">// capacity is now 8</text>

  <!-- ============================================================ -->
  <!-- STEP 3: After resize — room to grow                          -->
  <!-- ============================================================ -->
  <line x1="30" y1="515" x2="830" y2="515" stroke="#555" stroke-width="1" stroke-dasharray="6,3"/>

  <text x="30" y="545" fill="#28a745" font-size="15" font-weight="bold">Step 3: After resize — room to grow!</text>
  <text x="30" y="565" fill="#608b4e" font-size="12">arr[count] = 50; count++;  arr[count] = 60; count++;  arr[count] = 70; count++;</text>

  <!-- arr pointer (now pointing to new array) -->
  <rect x="30" y="580" width="80" height="40" rx="6" fill="#2d2d2d" stroke="#28a745" stroke-width="2"/>
  <text x="70" y="596" text-anchor="middle" fill="#28a745" font-size="10" font-weight="bold">int*</text>
  <text x="70" y="612" text-anchor="middle" fill="#9cdcfe" font-size="12">arr</text>

  <!-- Arrow from arr to heap -->
  <line x1="110" y1="600" x2="165" y2="600" stroke="#28a745" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- Final heap array: capacity=8, count=7 -->
  <rect x="175" y="580" width="650" height="45" rx="4" fill="#2d2d2d" stroke="#28a745" stroke-width="2"/>
  <text x="500" y="575" text-anchor="middle" fill="#28a745" font-size="10">capacity = 8</text>

  <!-- Original 4 values -->
  <rect x="185" y="588" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="221" y="607" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">10</text>

  <rect x="262" y="588" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="298" y="607" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">20</text>

  <rect x="339" y="588" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="375" y="607" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">30</text>

  <rect x="416" y="588" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#569cd655" stroke-width="1"/>
  <text x="452" y="607" text-anchor="middle" fill="#b5cea8" font-size="13" font-weight="bold">40</text>

  <!-- New values added after resize -->
  <rect x="493" y="588" width="72" height="30" rx="3" fill="#28a74522" stroke="#28a745" stroke-width="1.5"/>
  <text x="529" y="607" text-anchor="middle" fill="#28a745" font-size="13" font-weight="bold">50</text>

  <rect x="570" y="588" width="72" height="30" rx="3" fill="#28a74522" stroke="#28a745" stroke-width="1.5"/>
  <text x="606" y="607" text-anchor="middle" fill="#28a745" font-size="13" font-weight="bold">60</text>

  <rect x="647" y="588" width="72" height="30" rx="3" fill="#28a74522" stroke="#28a745" stroke-width="1.5"/>
  <text x="683" y="607" text-anchor="middle" fill="#28a745" font-size="13" font-weight="bold">70</text>

  <!-- Last empty slot -->
  <rect x="724" y="588" width="72" height="30" rx="3" fill="#1e1e1e" stroke="#55555555" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="760" y="607" text-anchor="middle" fill="#555" font-size="11">—</text>

  <!-- count bracket -->
  <line x1="185" y1="625" x2="719" y2="625" stroke="#dcdcaa" stroke-width="1.5"/>
  <text x="452" y="640" text-anchor="middle" fill="#dcdcaa" font-size="10">count = 7</text>

  <!-- capacity bracket -->
  <line x1="185" y1="648" x2="796" y2="648" stroke="#28a745" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="490" y="662" text-anchor="middle" fill="#28a745" font-size="10">capacity = 8 (1 slot remaining — no resize needed yet)</text>

  <!-- Bottom summary -->
  <rect x="50" y="685" width="760" height="42" rx="6" fill="#c586c015" stroke="#c586c0" stroke-width="1"/>
  <text x="430" y="703" text-anchor="middle" fill="#d4d4d4" font-size="12">This is exactly how <tspan fill="#c586c0" font-weight="bold">std::vector::push_back()</tspan> works:</text>
  <text x="430" y="719" text-anchor="middle" fill="#9da5b4" font-size="11">check capacity → double if full → allocate, copy, delete old → add element</text>
</svg>
